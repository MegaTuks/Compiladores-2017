<!-- Blockly Webpage.html*/ -->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Proyecto de Compiladores: Tuby</title>
</head>

<body>


<!--Blocky div where the content will be loaded -->
<div id="blocklyDiv" style="height: 480px; width: 600px;"></div>

<!--div where where the script and xml inject for blocky is done -->
<div> 
<!-- core Blockly script and the core blocks set -->
<script src="blockly_uncompressed.js"></script>
<!--script src="blocks_compressed.js"></script-->
<!-- code generation for javascript --> 

<script src="blocks/math.js"></script>
<script src="blocks/text.js"></script>
<script src="blocks/variables.js"></script>
<script src="blocks/loops.js"></script>
<script src="blocks/procedures.js"></script>
<script src="blocks/lists.js"></script>
<script src="blocks/colour.js"></script>
<script src="blocks/logic.js"></script>

<script src="generators/tuby.js"></script>
<script src="generators/tuby/math.js"></script>
<script src="generators/tuby/text.js"></script>
<script src="generators/tuby/variables.js"></script>
<script src="generators/tuby/logic.js"></script>
<script src="generators/tuby/loops.js"></script>
<script src="generators/tuby/procedures.js"></script>
<script src="generators/tuby/lists.js"></script>


<!-- messages for the user's language (in this case English) -->
<script src="msg/js/en.js"></script>
<!--structure of the toolbox-->
<xml id="toolbox" style="display: none">
  <category name="Logica" colour="120">
  	<block type="logic_compare"></block>
  	<sep gap="20"></sep>
    <block type="logic_operation"></block>
    <sep gap="20"></sep>
    <block type="logic_boolean"></block>
    <sep gap="20"></sep>
    <block type="controls_if"></block>

    
  </category>
  <sep gap="32"></sep>

  <category name="Ciclos" colour="160">
    <block type="ciclos_while"></block>
  </category>
  <sep gap="32"></sep>

  <category name="Matematicas" colour="200">
  	<block type="math_number"></block>
  	<block type="math_arithmetic"></block>
    <block type="math_arithmetic_par"></block>
  
  </category>
  <sep gap="32"></sep>

  <category name="Variables" colour="240">
  	<block type="var_dec"></block>
    <block type="assign_var"></block>
    <block type="use_var"></block>
    <block type="text"></block>
    

  </category>
  <sep gap="32"></sep>

  <category name="Funciones" colour="280">
    <block type="proc"></block>
    <block type="proc_arg"></block>
    <block type="proc_arg2"></block>
    <block type="return"></block>
    <block type="func_call"></block>
    <block type="func_calls"></block>
    <block type="procedures_main2"></block>

  </category>
  <sep gap="32"></sep>

  <category name="Texto" colour="320">
  	<block type="text"></block>
  	<block type="text_print"></block>
    <block type="procedures_input"></block>

  </category>
  <sep gap="32"></sep>

  <category name="Listas" colour="360">
  	<block type="lists_create"></block>
    <block type="lists_create_mat"></block>
    <block type="assign_varList"></block>
    <block type="assign_varMat"></block>
  </category>

</xml>
<!-- Injecting Blockly into an empty div. This script should be at the bottom of the page, or called by the onload event. -->
<script>
var workspace = Blockly.inject('blocklyDiv',
    {toolbox: document.getElementById('toolbox'),
     grid:
         {spacing: 25,
          length: 2,
          colour: '#ccc',
          snap: true},
     trashcan: true,
 zoom:
         {controls: false,
          wheel: true,
          startScale: 1.0,
          maxScale: 2,
          minScale: 0.5,
          scaleSpeed: 1.2},
});
</script>

</div>

<textarea id="textarea" rows="4" cols="50">
</textarea> 
 <button onclick="myUpdateFunction()">Generar Codigo</button> 

<!-- generates code function -->
<script>
function myUpdateFunction(event) {
  var code = Blockly.tuby.workspaceToCode(workspace);
  document.getElementById('textarea').value = code;
}
</script>


</body>

</html> 